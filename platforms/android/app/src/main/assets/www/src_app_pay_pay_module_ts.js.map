{"version":3,"sources":["./src/app/confirm-pay/confirm-pay.component.ts","./src/app/pay.service.ts","./src/app/pay/pay-routing.module.ts","./src/app/pay/pay.module.ts","./src/app/pay/pay.page.ts","./src/app/confirm-pay/confirm-pay.component.scss","./src/app/pay/pay.page.scss","./src/app/confirm-pay/confirm-pay.component.html","./src/app/pay/pay.page.html"],"names":[],"mappings":"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","file":"src_app_pay_pay_module_ts.js","sourcesContent":["import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  OnInit,\n  ViewChild,\n} from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { ModalController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-confirm-pay',\n  templateUrl: './confirm-pay.component.html',\n  styleUrls: ['./confirm-pay.component.scss'],\n})\nexport class ConfirmPayComponent implements OnInit, AfterViewInit {\n  @ViewChild('iframe') iframe: ElementRef;\n\n  page: any;\n  constructor(\n    private sanitizer: DomSanitizer,\n    private modalController: ModalController\n  ) {}\n\n  ngOnInit() {\n    this.transformHtml(this.page);\n  }\n\n  transformHtml(htmlTextWithStyle) {\n    this.sanitizer.bypassSecurityTrustHtml(htmlTextWithStyle);\n    this.sanitizer.bypassSecurityTrustScript(htmlTextWithStyle);\n  }\n\n  ngAfterViewInit() {\n    const doc =\n      this.iframe.nativeElement.contentDocument ||\n      this.iframe.nativeElement.contentWindow;\n    doc.open();\n    doc.write(this.page);\n    doc.close();\n  }\n\n  close() {\n    this.modalController.dismiss();\n  }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PaymentService {\n  url = 'https://ketengah-api.prototype.com.my/fpx/initiate/payment/app/test';\n  constructor(private http: HttpClient) { }\n\n  submitPayment(paymentDetails: PaymentDetails) {\n    console.log(paymentDetails, 'success');\n\n    return this.http.get(\n      this.url,\n      {\n        params: {\n          reference_id: paymentDetails.referenceId,\n          customer_email: paymentDetails.customerEmail,\n          amount: paymentDetails.amount,\n          additional_params: paymentDetails.additionalInfo,\n          remark: paymentDetails.remark,\n          customer_name: paymentDetails.customerName,\n        },\n\n      }\n\n    );\n  }\n}\n\nexport interface PaymentDetails {\n  referenceId: string;\n  customerName: string;\n  customerEmail: string;\n  remark: string;\n  additionalInfo: string;\n  amount: number;\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PayPage } from './pay.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PayPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PayPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PayPageRoutingModule } from './pay-routing.module';\n\nimport { PayPage } from './pay.page';\nimport { ConfirmPayComponent } from '../confirm-pay/confirm-pay.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PayPageRoutingModule,\n    FormsModule,\n    ReactiveFormsModule,\n  ],\n  declarations: [PayPage, ConfirmPayComponent],\n})\nexport class PayPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ModalController } from '@ionic/angular';\nimport { ConfirmPayComponent } from '../confirm-pay/confirm-pay.component';\nimport { PaymentService } from '../pay.service';\nimport { Browser } from '@capacitor/browser';\nimport { InAppBrowser } from '@ionic-native/in-app-browser/ngx';\n@Component({\n  selector: 'app-pay',\n  templateUrl: './pay.page.html',\n  styleUrls: ['./pay.page.scss'],\n})\nexport class PayPage implements OnInit {\n  paymentForm: FormGroup;\n  responsePage: any;\n  paymentRequested = false;\n  constructor(\n    private formBuilder: FormBuilder,\n    private paymentService: PaymentService,\n    private modalController: ModalController,\n    private iab: InAppBrowser\n  ) { }\n\n  ngOnInit() {\n    this.paymentForm = this.formBuilder.group({\n      referenceId: ['', Validators.required],\n      customerName: ['', Validators.required],\n      amount: ['', Validators.required],\n      remark: ['', Validators.required],\n      customerEmail: ['', Validators.required],\n      additionalInfo: [''],\n    });\n\n    this.paymentForm.patchValue({\n      referenceId: '123',\n      customerName: 'John Doe',\n      amount: 100,\n      remark: 'Test',\n      customerEmail: 'ak@gmail.com',\n      additionalInfo: 'Test',\n    });\n  }\n\n  async pay() {\n    const data = this.paymentForm.value;\n\n\n    // eslint-disable-next-line max-len\n    const url = `https://ketengah-api.prototype.com.my/fpx/initiate/payment/app/?reference_id=${data.referenceId}&customer_email=${data.customerEmail}&amount=${data.amount}&remark=${data.remark}&additional_params=${data.additionalInfo}&customer_name=${data.customerName}`;\n    const browser = this.iab.create(url, '_blank');\n    browser.on('loadstop').subscribe((event) => {\n      if (event.url.endsWith('.json')) {\n        browser.close();\n      }\n    });\n\n    // await Browser.open({ url, presentationStyle: 'popover', },);\n    //close browser on detect url\n\n\n  }\n\n  async presentModal() {\n    const modal = await this.modalController.create({\n      component: ConfirmPayComponent,\n      componentProps: { value: 123, page: this.responsePage },\n    });\n\n    await modal.present();\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjb25maXJtLXBheS5jb21wb25lbnQuc2NzcyJ9 */\";","export default \"ion-item {\\n  border-color: #403e39;\\n  border-width: thin;\\n  border-style: solid;\\n  border-radius: 3px;\\n  margin-bottom: 0.5rem;\\n  margin-left: 0.3rem;\\n  margin-right: 0.3rem;\\n}\\n\\nform {\\n  margin-top: 0.5rem;\\n}\\n\\nion-content {\\n  --background: linear-gradient(\\n      rgba(61, 44, 124, 0.9) 27.6%,\\n      rgba(201, 87, 121, 0.9) 66.15%,\\n      rgba(117, 5, 4, 0.9) 100%\\n    ),\\n    url(\\\"/assets/icon/background.png\\\");\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBheS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxxQkFBQTtFQUNBLGtCQUFBO0VBQ0EsbUJBQUE7RUFDQSxrQkFBQTtFQUNBLHFCQUFBO0VBQ0EsbUJBQUE7RUFDQSxvQkFBQTtBQUNGOztBQUVBO0VBQ0Usa0JBQUE7QUFDRjs7QUFFQTtFQUNFOzs7OztzQ0FBQTtBQU1GIiwiZmlsZSI6InBheS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taXRlbSB7XG4gIGJvcmRlci1jb2xvcjogIzQwM2UzOTtcbiAgYm9yZGVyLXdpZHRoOiB0aGluO1xuICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICBib3JkZXItcmFkaXVzOiAzcHg7XG4gIG1hcmdpbi1ib3R0b206IDAuNXJlbTtcbiAgbWFyZ2luLWxlZnQ6IDAuM3JlbTtcbiAgbWFyZ2luLXJpZ2h0OiAwLjNyZW07XG59XG5cbmZvcm0ge1xuICBtYXJnaW4tdG9wOiAwLjVyZW07XG59XG5cbmlvbi1jb250ZW50IHtcbiAgLS1iYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoXG4gICAgICByZ2JhKDYxLCA0NCwgMTI0LCAwLjkpIDI3LjYlLFxuICAgICAgcmdiYSgyMDEsIDg3LCAxMjEsIDAuOSkgNjYuMTUlLFxuICAgICAgcmdiYSgxMTcsIDUsIDQsIDAuOSkgMTAwJVxuICAgICksXG4gICAgdXJsKFwiL2Fzc2V0cy9pY29uL2JhY2tncm91bmQucG5nXCIpO1xufVxuIl19 */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"secondary\\\">\\n      <ion-button (click)=\\\"close()\\\">\\n        <ion-icon slot=\\\"start\\\" name=\\\"close\\\"></ion-icon>\\n        close\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>Confirm payment</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <iframe #iframe height=\\\"100%\\\" width=\\\"100%\\\" frameborder=\\\"0\\\"></iframe>\\n</ion-content>\\n\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>pay</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <form [formGroup]=\\\"paymentForm\\\" (ngSubmit)=\\\"pay()\\\">\\n    <!-- create ionic form with referene number, customer name,  email, amount  ,remark , additional params  -->\\n\\n    <ion-item fill=\\\"outline\\\" mode=\\\"outline\\\">\\n      <ion-label position=\\\"floating\\\">Reference Number</ion-label>\\n      <ion-input\\n        fill=\\\"outline\\\"\\n        formControlName=\\\"referenceId\\\"\\n        type=\\\"text\\\"\\n      ></ion-input>\\n    </ion-item>\\n\\n    <ion-item fill=\\\"outline\\\">\\n      <ion-label position=\\\"floating\\\">Customer Name</ion-label>\\n      <ion-input formControlName=\\\"customerName\\\" type=\\\"text\\\"></ion-input>\\n    </ion-item>\\n\\n    <ion-item fill=\\\"outline\\\">\\n      <ion-label position=\\\"floating\\\">Customer Email</ion-label>\\n      <ion-input formControlName=\\\"customerEmail\\\" type=\\\"text\\\"></ion-input>\\n    </ion-item>\\n\\n    <ion-item fill=\\\"outline\\\">\\n      <ion-label position=\\\"floating\\\">Amount</ion-label>\\n      <ion-input formControlName=\\\"amount\\\" type=\\\"text\\\"></ion-input>\\n    </ion-item>\\n\\n    <ion-item fill=\\\"outline\\\">\\n      <ion-label position=\\\"floating\\\">Remark</ion-label>\\n      <ion-input formControlName=\\\"remark\\\" type=\\\"text\\\"></ion-input>\\n    </ion-item>\\n\\n    <ion-item fill=\\\"outline\\\">\\n      <ion-label position=\\\"floating\\\">Additional Params</ion-label>\\n      <ion-input formControlName=\\\"additionalInfo\\\" type=\\\"text\\\"></ion-input>\\n    </ion-item>\\n\\n    <ion-button expand=\\\"block\\\" type=\\\"submit\\\" [disabled]=\\\"!paymentForm.valid\\\"\\n      >Pay</ion-button\\n    >\\n  </form>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}